parameters:
  - name: productName
    type: string
  - name: deployEnvironmentName
    type: string
  - name: stage
    type: string
    default: deploy
  - name: incrementPercent
    type: number
    default: 0
  - name: imageName
    type: string
  - name: kubernetesManifestPath
    type: string
  - name: kubernetesNamespace
    type: string
  - name: rolloutComment
    type: string
    default: ""

steps:
  - script: |
      echo "[Quadrant] Deploying ${{ parameters.productName }} container update"
      echo "Environment: ${{ parameters.deployEnvironmentName }}"
      echo "Increment: ${{ parameters.incrementPercent }}%"
    displayName: "Quadrant â€“ deploy ${{ parameters.incrementPercent }}%"

  - template: templates/container-workloads/container-app-simple-deploy-steps.yml@Platform-Engineering
    parameters:
      imageName: ${{ parameters.imageName }}
      kubernetesManifestPath: ${{ parameters.kubernetesManifestPath }}
      kubernetesNamespace: ${{ parameters.kubernetesNamespace }}
      rolloutComment: ${{ parameters.rolloutComment }}
