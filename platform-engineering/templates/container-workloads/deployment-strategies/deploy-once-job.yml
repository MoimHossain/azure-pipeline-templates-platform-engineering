# Template for a simple one-time or Rolling deployment (deploy-once)

parameters:
  - name: productName
    type: string
  - name: deployEnvironmentName
    type: string
  - name: deployStepsTemplate
    type: string
  - name: deployStepsParameters
    type: object
    default: {}

jobs:
  - deployment: DeployOnce
    displayName: "üöÄ Deploy Once ‚Äì ${{ parameters.productName }}"
    environment: ${{ parameters.deployEnvironmentName }}
    strategy:
      runOnce:
        deploy:
          steps:
            # Pre-deploy info/log
            - script: |
                echo "Starting one-time deployment of ${{ parameters.productName }} to ${{ parameters.deployEnvironmentName }}"
              displayName: "‚ÑπÔ∏è ${{ parameters.productName }} ‚Äì Initialize deploy"

            # Inject actual deployment steps
            - template: ${{ parameters.deployStepsTemplate }}
              parameters: ${{ parameters.deployStepsParameters }}

            # Post-deploy info/log
            - script: |
                echo "Deployment of ${{ parameters.productName }} completed successfully"
              displayName: "‚úÖ ${{ parameters.productName }} ‚Äì Deployment completed"
