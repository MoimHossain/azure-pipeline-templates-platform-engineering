# Template for a simple Rolling (run-once) deployment

parameters:
  - name: productName
    type: string
  - name: deployEnvironmentName
    type: string
  - name: deployStepsTemplate
    type: string
  - name: deployStepsParameters
    type: object
    default: {}

jobs:
  - deployment: RollingDeploy
    displayName: "üöÄ Rolling ‚Äì ${{ parameters.productName }}"
    environment: ${{ parameters.deployEnvironmentName }}
    strategy:
      runOnce:
        deploy:
          steps:
            - script: |
                echo "Starting rolling deployment of ${{ parameters.productName }} to ${{ parameters.deployEnvironmentName }}"
              displayName: "‚ÑπÔ∏è ${{ parameters.productName }} ‚Äì initialize"

            - template: ${{ parameters.deployStepsTemplate }}
              parameters: ${{ parameters.deployStepsParameters }}

            - script: |
                echo "Rolling deployment of ${{ parameters.productName }} completed"
              displayName: "‚úÖ ${{ parameters.productName }} ‚Äì finalize"
