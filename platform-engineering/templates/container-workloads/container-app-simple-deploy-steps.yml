parameters:
  - name: imageName
    type: string
  - name: kubernetesManifestPath
    type: string
    default: manifests/deployment.yml
  - name: kubernetesNamespace
    type: string
    default: default
  - name: rolloutComment
    type: string
    default: ""

steps:
  - script: |
      echo "Starting container deployment"
      echo "Manifest: ${{ parameters.kubernetesManifestPath }}"
      echo "Namespace: ${{ parameters.kubernetesNamespace }}"
      if [ -n "${{ parameters.rolloutComment }}" ]; then
        echo "Comment: ${{ parameters.rolloutComment }}"
      fi
    displayName: "â„¹ï¸ Container â€“ describe rollout"

  - script: |
      echo "Applying manifest ${{ parameters.kubernetesManifestPath }} for image ${{ parameters.imageName }}"
      # kubectl apply -n ${{ parameters.kubernetesNamespace }} -f ${{ parameters.kubernetesManifestPath }}
    displayName: "ğŸš€ Container â€“ apply manifest"

  - script: |
      echo "Verifying deployment for image ${{ parameters.imageName }}"
      # kubectl rollout status deployment/<name> -n ${{ parameters.kubernetesNamespace }}
    displayName: "âœ… Container â€“ verify rollout"
